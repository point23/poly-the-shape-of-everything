(undo-tree-save-format-version . 1)
"b1a8b4aece2bc79b0fe40167bc4db6b6e59730ae"
[nil nil nil nil (25687 26033 910001 0) 0 nil]
([nil current ((#("#+begin_src plantuml :file  Game_Recorder.png
title Puzzle Game Recorder

class Input_Record {
  button: Game_Button
  time: Gameplay_Time
}

class Game_Input_Recorder {
  records: Input_Record[]  
  add(button: Game_Button, time: Gameplay_Time): void
  cosume(): {succeed: boolean, button: Game_Button}
  completed(): boolean
}

Game_Input_Recorder o--> Input_Record : moves
#+end_src

" 0 44 (font-lock-fontified t fontified nil font-lock-multiline t face org-block-begin-line org-reference 7499) 44 45 (font-lock-fontified t rear-nonsticky t fontified nil font-lock-multiline t face org-block-begin-line org-reference 7499) 45 46 (font-lock-fontified t fontified nil font-lock-multiline t face org-block-begin-line) 46 73 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 73 349 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 349 374 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 374 375 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 375 376 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 376 384 (font-lock-fontified t fontified nil font-lock-multiline t face org-block-end-line) 384 385 (font-lock-fontified t fontified nil rear-nonsticky t font-lock-multiline t face org-block-end-line) 385 386 (fontified nil face org-block-end-line) 386 387 (fontified nil)) . -253) (undo-tree-id0 . -385) (640 . 678) (#("
" 0 1 (fontified nil)) . 640) (639 . 641) (#("#+begin_src plantuml :file  Gameplay_Time.png
title Puzzle Gameplay Timer

class Gameplay_Time {
  round: number
  tick: number
}

class Gameplay_Timer {
  tick_idx: number
  round_idx: number
  running_idx: number

  reset(): void
  now(): number
  compare(a: Gameplay_Time, b: Gameplay_Time): number
  set_gameplay_time(t: Gameplay_Time)
  get_gameplay_time(): Gameplay_Time
  run(caller: Component, loop_callback: (()=>{}), tick_callbacks: (()=>{})[])
  stop()  
}

Gameplay_Timer --> Gameplay_Time

#+end_src

" 0 44 (font-lock-fontified t fontified nil font-lock-multiline t face org-block-begin-line org-reference 6985) 44 45 (font-lock-fontified t fontified nil rear-nonsticky t font-lock-multiline t face org-block-begin-line org-reference 6985) 45 46 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line) 46 75 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 75 81 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 81 93 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 93 94 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 94 261 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 261 273 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 273 274 (font-lock-fontified t src-block t rear-nonsticky t fontified nil font-lock-multiline t) 274 279 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 279 291 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 291 292 (font-lock-fontified t src-block t rear-nonsticky t fontified nil font-lock-multiline t) 292 325 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 325 337 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 337 338 (font-lock-fontified t src-block t rear-nonsticky t fontified nil font-lock-multiline t) 338 353 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 353 363 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 363 375 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 375 376 (font-lock-fontified t src-block t rear-nonsticky t fontified nil font-lock-multiline t) 376 463 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 463 465 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 465 467 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 467 500 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 500 501 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 501 502 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 502 503 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 503 504 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 504 505 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 505 506 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 506 507 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 507 508 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 508 509 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 509 510 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 510 511 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 511 512 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 512 513 (fontified nil face org-block-end-line) 513 514 (fontified nil)) . -214) (728 . 766) (#("
" 0 1 (fontified nil)) . 728) (727 . 729) (#("#+begin_src plantuml :file  Game_Movement_Module.png
title Puzzle Game Movement Module

class Transaction_Manager {
  control_flags: number
  issued_transactions: Move_Transaction[]
  clear()
  new_transaction(move: Single_Move, duration: number): boolean
  update_transactions(): void
}

class Move_Transaction {
  id: number
  moves: Map<number, Single_Move>
  arcs: Map<number, Singe_Move[]>
  entity_manager: Entity_Manager
  piority: number
  issue_time: Gameplay_Time
  commit_time: Gameplay_Time
  sorted_moves(): Single_Move[]
  add_move(move: Single_Move): void
  add_arc(move: Single_Move): void
  debug_info(): string
}
Transaction_Manager o--> Move_Transaction : issued_transactions
Move_Transaction --> Entity_Manager

together {
abstract class Single_Move {
  id: number
  info: Move_Info
  flags: number
  piority: number
  execute_in_preorder(transaction: Move_Transaction)
  complete_in_postorder(transaction: Move_Transaction)
  enact(transaction: Move_Transaction): boolean
  execute(transaction: Move_Transaction)
  complete(transaction: Move_Transaction)
  update(transaction: Move_Transaction, ratio: number)  
  debug_info(): string
}

class Move_Info {
  move_type: Move_Type;
  source_entity_id: number
  target_entity_id: number
  start_position: Vec3
  end_position: Vec3
  start_direction: Direction
  end_direction: Direction
  reaction_direction: Direction
}

enum Move_Type
enum Move_Flags
enum Move_Priorities
}

Single_Move o--> Move_Info
Single_Move --> Move_Flags
Single_Move --> Move_Priorities
Move_Info --> Move_Type

Move_Transaction o--> Single_Move : moves


#+end_src

" 0 51 (font-lock-fontified t fontified nil font-lock-multiline t face org-block-begin-line org-reference 5374) 51 52 (font-lock-fontified t fontified nil rear-nonsticky t font-lock-multiline t face org-block-begin-line org-reference 5374) 52 53 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line) 53 85 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 85 86 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 86 87 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 87 96 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 96 103 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 103 104 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 104 116 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 116 149 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 149 163 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 163 182 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 182 288 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 288 289 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 289 387 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 387 388 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 388 395 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 395 425 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 425 426 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 426 427 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 427 428 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 428 429 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 429 430 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 430 431 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 431 432 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 432 433 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 433 434 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 434 435 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 435 436 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 436 437 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 437 438 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 438 439 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 439 440 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 440 441 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 441 442 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 442 443 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 443 444 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 444 445 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 445 446 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 446 447 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 447 448 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 448 449 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 449 450 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 450 451 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 451 452 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 452 453 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 453 454 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 454 455 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 455 456 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 456 457 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 457 458 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 458 459 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 459 460 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 460 461 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 461 462 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 462 463 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 463 464 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 464 465 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 465 466 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 466 467 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 467 468 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 468 469 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 469 470 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 470 471 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 471 472 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 472 473 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 473 474 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 474 475 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 475 476 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 476 477 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 477 478 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 478 479 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 479 480 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 480 481 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 481 482 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 482 483 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 483 484 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 484 485 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 485 486 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 486 487 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 487 488 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 488 489 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 489 490 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 490 491 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 491 492 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 492 493 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 493 494 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 494 495 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 495 496 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 496 497 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 497 499 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 499 500 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 500 506 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 506 507 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 507 518 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 518 519 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 519 535 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 535 547 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 547 548 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 548 553 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 553 575 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 575 576 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 576 577 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 577 578 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 578 579 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 579 580 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 580 581 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 581 582 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 582 583 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 583 584 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 584 585 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 585 586 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 586 587 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 587 588 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 588 589 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 589 590 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 590 591 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 591 592 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 592 593 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 593 594 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 594 595 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 595 596 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 596 597 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 597 598 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 598 599 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 599 600 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 600 601 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 601 602 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 602 603 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 603 604 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 604 605 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 605 606 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 606 607 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 607 608 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 608 609 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 609 610 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 610 611 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 611 612 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 612 613 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 613 614 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 614 615 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 615 616 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 616 617 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 617 618 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 618 619 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 619 620 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 620 621 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 621 622 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 622 623 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 623 624 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 624 625 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 625 626 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 626 627 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 627 628 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 628 629 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 629 631 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 631 693 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 693 694 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 694 695 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 695 709 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 709 718 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 718 727 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 727 728 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 728 729 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 729 730 (font-lock-fontified t src-block t rear-nonsticky t fontified nil font-lock-multiline t) 730 731 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 731 743 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 743 744 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 744 745 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 745 772 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 772 803 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 803 808 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 808 863 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 863 884 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 884 888 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 888 890 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 890 943 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 943 944 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 944 952 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 952 953 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 953 954 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 954 955 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 955 956 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 956 957 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 957 958 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 958 959 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 959 960 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 960 961 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 961 976 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 976 977 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 977 978 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 978 979 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 979 980 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 980 981 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 981 982 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 982 989 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 989 992 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 992 993 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 993 1034 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1034 1040 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1040 1044 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1044 1075 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1075 1092 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1092 1110 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1110 1129 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1129 1131 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1131 1132 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1132 1133 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1133 1141 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1141 1142 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1142 1143 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1143 1144 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1144 1145 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1145 1146 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1146 1147 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1147 1148 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1148 1149 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1149 1150 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1150 1151 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1151 1152 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1152 1153 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1153 1154 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1154 1155 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1155 1156 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1156 1157 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 1157 1159 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1159 1160 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1160 1161 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1161 1162 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1162 1163 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1163 1164 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1164 1165 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1165 1166 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1166 1167 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1167 1168 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1168 1169 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1169 1170 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1170 1171 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1171 1172 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1172 1173 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1173 1174 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1174 1175 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1175 1176 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1176 1177 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1177 1178 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1178 1179 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1179 1180 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1180 1181 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1181 1182 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1182 1183 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1183 1184 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1184 1185 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1185 1186 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1186 1187 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1187 1188 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1188 1189 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1189 1190 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1190 1191 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1191 1192 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1192 1193 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1193 1194 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1194 1195 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1195 1196 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1196 1197 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1197 1198 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1198 1199 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1199 1200 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1200 1201 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1201 1202 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1202 1203 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1203 1204 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1204 1205 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1205 1206 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1206 1207 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1207 1208 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1208 1209 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1209 1210 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1210 1211 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1211 1212 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1212 1213 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1213 1214 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1214 1215 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1215 1216 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1216 1217 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1217 1218 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1218 1219 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1219 1220 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1220 1221 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1221 1222 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1222 1223 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1223 1224 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1224 1225 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1225 1226 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1226 1227 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1227 1228 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1228 1229 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1229 1230 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1230 1231 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1231 1232 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1232 1233 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1233 1234 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1234 1235 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1235 1236 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1236 1237 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1237 1238 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1238 1239 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1239 1240 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1240 1241 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1241 1242 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1242 1243 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1243 1244 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1244 1245 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1245 1246 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1246 1247 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1247 1248 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1248 1272 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1272 1278 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1278 1303 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1303 1313 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1313 1328 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1328 1355 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1355 1388 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1388 1390 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1390 1405 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1405 1444 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1444 1472 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1472 1499 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1499 1515 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1515 1529 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1529 1530 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 1530 1555 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1555 1556 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1556 1557 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1557 1558 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1558 1559 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1559 1560 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1560 1561 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1561 1562 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1562 1563 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1563 1564 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1564 1565 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1565 1566 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1566 1567 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1567 1584 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1584 1596 (font-lock-fontified t src-block t fontified nil font-lock-multiline t) 1596 1597 (font-lock-fontified t src-block t fontified nil rear-nonsticky t font-lock-multiline t) 1597 1598 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1598 1600 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1600 1609 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 1609 1610 (fontified nil face org-block-end-line) 1610 1611 (fontified nil)) . -168) (1779 . 1824) (#("
" 0 1 (fontified nil)) . 1779) (1778 . 1780) (#("#+begin_src plantuml :file  Game_Undo_Module.png
title Puzzle Game Undo Module

enum Undo_Action_Type

class Undo_Handler {
    manager: Entity_Manager
    pending_creations: CD_Action[]
    pending_destructions: CD_Action[]
    undo_records: Stack<Undo_Record>
    redo_records: Stack<Undo_Record>
    old_entity_state: Map<number, Undoable_Entity_Data>
    dirty: boolean
    enabled: boolean
}

class CD_Action {
  entity_id: number
  serialized_data: string
}
note top of CD_Action : creation or destruction action

class Undo_Record {
  gameplay_time: number
  active_hero_idx: number
  transaction: string
}

CD_Action <--o Undo_Handler : pending_creations,pending_destructions
Undo_Handler o- Undo_Record: undo_records >
Undo_Handler --> Undo_Action_Type

Undo_Handler <--o Entity_Manager
Entity_Manager o- Game_Entity: all_entities >
Game_Entity o--> Undoable_Entity_Data
#+end_src

" 0 48 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line org-reference 4483) 48 49 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line) 49 499 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 499 500 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 500 501 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 501 502 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 502 503 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 503 504 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 504 505 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 505 506 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 506 507 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 507 519 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 519 880 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 880 889 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 889 890 (fontified nil face org-block-end-line) 890 891 (fontified nil)) . -126) (1017 . 1058) (#("
" 0 1 (fontified nil)) . 1017) (1016 . 1018) (#("#+begin_src plantuml :file  Game_Entity_Module.png
title Puzzle Game Entity Module
enum Entity_Type
enum Polyomino_Type
enum Direction
enum Quadrant

class Tree_Node {
  x: number
  y: numebr
  values: Game_Entity[]
  children: [Tree_Node, Tree_Node, Tree_Node, Tree_Node, Tree_Node]
}

class Proximity_Grid {
  origin: Vec3
  grid_size: Size
  quad_tree: Tree_Node
  move_entity(e: Game_Entity, p: Vec3)
  add_entity(e: Game_Entity)
  remove_entity(e: Game_Entity)
  point_search(p: Vec3): Game_Entity[]
  local2world(local_pos: Vec3): Vec3
}

class Serializable_Entity_Data {
  prefab: string
  position: Vec3
  rotation: Direction
}

class Undoable_Entity_Data {
  {static} default: Undoable_Entity_Data
  memory: Int32Array
}

class Game_Entity {
  id: number
  undobale: Undoable_Entity_Data
  polyomino_type: Polyomino_Type
  entity_type: Entity_Type
  editing_cover: MeshRenderer
  body: Polygon_Entity
  indicator: Polygon_Entity
}

class Entity_Manager {
  all_entities: Game_Entity[]
  proximity_grid: Proximity_Grid
  undo_handler: Undo_Handler
  load_entities(entities_info: any)
  load_entity(info: any, id: number = null): Game_Entity
  find(id: number)
  reclaim(e: Game_Entity)
  locate_entities(p: Vec3): Game_Entity[]
  locate_supporters(p: Vec3, depth: number = 1): Game_Entity[]
  locate_supportees(p: Vec3)
  locate_current_supporters(e: Game_Entity): Game_Entity[]
  locate_future_supporters(e: Game_Entity, d: Direction): Game_Entity[]
  locate_current_supportees(e: Game_Entity): Game_Entity[]
}

Proximity_Grid --> Tree_Node
Tree_Node --> Quadrant
Proximity_Grid <--o Entity_Manager

Entity_Manager o--> Undo_Handler
Entity_Manager o- Game_Entity: all_entities >

Game_Entity o--> Undoable_Entity_Data
Game_Entity --> Serializable_Entity_Data
Game_Entity --> Entity_Type
Game_Entity --> Direction
Game_Entity --> Polyomino_Type

#+end_src

" 0 50 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line org-reference 2618) 50 51 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line) 51 499 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 499 500 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 500 501 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 501 502 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 502 503 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 503 504 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 504 505 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 505 506 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 506 612 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 612 938 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 938 940 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 940 942 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 942 943 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 943 959 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 959 960 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 960 979 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 979 980 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 980 1017 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1017 1018 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1018 1056 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1056 1203 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1203 1230 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1230 1231 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1231 1254 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1254 1255 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1255 1278 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1278 1279 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1279 1304 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1304 1305 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1305 1327 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1327 1328 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1328 1354 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1354 1355 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1355 1393 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1393 1394 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1394 1439 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1439 1440 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1440 1854 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1854 1863 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 1863 1864 (fontified nil face org-block-end-line) 1864 1865 (fontified nil)) . -82) (1947 . 1990) (#("
" 0 1 (fontified nil)) . 1947) (1946 . 1948) (#("#+begin_src plantuml :file Level_Editor.png

title Puzzle Game Level Editor

abstract Game_Mode_Base <<State>> {
    on_enter()
    on_exit()
    save_level()
    handle_key_down(event: EventKeyboard)
    handle_key_up(event: EventKeyboard)
    handle_mouse_down(event: EventMouse)
    handle_mouse_move(event: EventMouse)
    handle_mouse_scroll(event: EventMouse)
    handle_touch_start(event: EventTouch)
    handle_touch_move(event: EventTouch)
    handle_touch_end(event: EventTouch)
}

class Contextual_Manager <<Context>> {
  {static} instance: Contextual_Manager
  game_modes: Game_Mode[]
  current_mode: Game_Mode
  current_mode_idx: number
  register_events();
  unregister_events();
  switch_mode();
  save_level();
  {static} Settle(i: Contextual_Manager);
}

class Entity_Edit_Mode <<ConcreteStateA>> {
  camera: Camera
  copy_selected_entities()
  paste_copied_entities()
  delete_selected_entities()
  select()
  deselect()
  select_all()
  deselect_all()
  move_selected_entities()
  rotate_selected_entities()
}

class Test_Run_Mode <<ConcreteStateB>> {
  inputs_navigatar: Navigatar
  input_manager: Input_Manager 
  show_hints()
  init_ui()
  clear_ui()
}

class Swipe_Camera_Mode <<ConcreteStateC>> {
  controller: Camera_3D_Controller;
}

class Light_Mode <<ConcreteStateD>> {
  controller: Camera_3D_Controller;
}

Entity_Edit_Mode --|> Game_Mode_Base
Test_Run_Mode --|> Game_Mode_Base
Swipe_Camera_Mode --|> Game_Mode_Base
Light_Mode --|> Game_Mode_Base

Contextual_Manager o--> Game_Mode_Base

class Level_Editor <<Client>> {}
Level_Editor --> Contextual_Manager

#+end_src

" 0 43 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line org-reference 1019) 43 44 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line) 44 49 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 49 76 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 76 101 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 101 110 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 110 492 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 492 517 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 517 528 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 528 544 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 544 576 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 576 727 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 727 756 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 756 757 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 757 793 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 793 794 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 794 795 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 795 813 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 813 815 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 815 818 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 818 831 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 831 833 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 833 834 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 834 845 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 845 846 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 846 881 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 881 882 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 882 883 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 883 901 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 901 902 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 902 903 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 903 904 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 904 905 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 905 906 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 906 942 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 942 943 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 943 945 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 945 946 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 946 947 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 947 1050 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1050 1068 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 1068 1200 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1200 1218 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 1218 1277 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1277 1295 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 1295 1299 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1299 1300 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1300 1332 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1332 1333 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1333 1537 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1537 1547 (fontified nil font-lock-fontified t src-block t face org-target font-lock-multiline t) 1547 1588 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1588 1597 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 1597 1598 (fontified nil face org-block-end-line) 1598 1599 (fontified nil)) . -44) (1643 . 1680) (#("
" 0 1 (fontified nil)) . 1643) (1642 . 1644) (#("#+begin_src plantuml :file Game_Input_Module.png
title Game Input Module

class Button_State {
    button: Game_Button
    ended_down: boolean
    counter: number
    pressed_at: number
}

class Game_Input {
    buffered_player_actions: Queue<Game_Button>
    pending_records: Button_State[]
    button_states: Map<number, button_state>
    press(b: Game_Button)
    reset()
    increase_count(b: Game_Button)
    release(b: Game_Button)
}

class Game_Input_Handler {
    input: Game_Input
    init(i: Game_Input)
    clear()
    update_input()
    name(): string
}

class Virtual_Controller extends Game_Input_Handler 
class Keyboard extends Game_Input_Handler

enum Game_Button
enum Dpad_Button
enum Action_Button
enum Keyboard_Command_Button

Virtual_Controller --> Game_Button
Virtual_Controller --> Dpad_Button
Virtual_Controller --> Action_Button

Keyboard --> Game_Button
Keyboard --> Keyboard_Command_Button

Game_Input_Handler o-> Game_Input

Game_Input --> Button_State
Game_Input --> Game_Button
#+end_src

" 0 48 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line org-reference 1) 48 49 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-begin-line) 49 499 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 499 500 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 500 501 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 501 502 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 502 503 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 503 504 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 504 505 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 505 506 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 506 507 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 507 508 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 508 509 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 509 510 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 510 511 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 511 512 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 512 513 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 513 514 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 514 515 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 515 516 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 516 517 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 517 518 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 518 519 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 519 520 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 520 521 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 521 522 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 522 523 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 523 524 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 524 525 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 525 526 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 526 527 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 527 528 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 528 529 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 529 530 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 530 531 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 531 532 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 532 533 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 533 534 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 534 535 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 535 536 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 536 537 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 537 538 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 538 539 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 539 540 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 540 541 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 541 542 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 542 543 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 543 544 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 544 545 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 545 546 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 546 547 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 547 548 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 548 549 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 549 550 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 550 551 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 551 552 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 552 553 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 553 554 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 554 555 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 555 556 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 556 557 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 557 558 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 558 559 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 559 560 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 560 561 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 561 562 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 562 563 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 563 564 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 564 565 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 565 566 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 566 567 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 567 568 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 568 569 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 569 570 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 570 571 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 571 572 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 572 573 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 573 574 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 574 575 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 575 576 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 576 577 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 577 578 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 578 1007 (fontified nil font-lock-fontified t src-block t font-lock-multiline t) 1007 1016 (fontified nil font-lock-fontified t font-lock-multiline t face org-block-end-line) 1016 1017 (fontified nil face org-block-end-line) 1017 1018 (fontified nil)) . -1) (1019 . 1061) (#("
" 0 1 (fontified nil)) . 1019) (1018 . 1020) (nil org-reference nil 7543 . 7544) (nil org-reference nil 7499 . 7543) (nil org-reference nil 7029 . 7030) (nil org-reference nil 6985 . 7029) (nil org-reference nil 5425 . 5426) (nil org-reference nil 5374 . 5425) (nil org-reference nil 4483 . 4531) (nil org-reference nil 2618 . 2668) (nil org-reference nil 1019 . 1062) (nil org-reference nil 1 . 49) (t . 0) (1 . 7885) (t . 0)) nil (25687 26033 909994 0) 0 nil])
nil
